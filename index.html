<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å­¦ç¿’ã‚¿ã‚¤ãƒãƒ¼ï¼ˆFirebaseç‰ˆï¼‰</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <script type="module">
        import { Play, Pause, Square, Clock, TrendingUp, Target, User, LogOut } from 'https://cdn.skypack.dev/lucide-react';
        window.LucideIcons = { Play, Pause, Square, Clock, TrendingUp, Target, User, LogOut };
    </script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { Play, Pause, Square, Clock, TrendingUp, Target, User, LogOut } = window.LucideIcons;

        // Firebaseè¨­å®šï¼ˆã‚ãªãŸå°‚ç”¨ã®è¨­å®šã«ç½®ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰
     const firebaseConfig = {
  apiKey: "AIzaSyDT6UPrNLx-Gc6X5jmXfvEx9nljyoU6gcY",
  authDomain: "study-timer-4cf6c.firebaseapp.com",
  projectId: "study-timer-4cf6c",
  storageBucket: "study-timer-4cf6c.firebasestorage.app",
  messagingSenderId: "602384256321",
  appId: "1:602384256321:web:b44a4632cc830b5f2ee5c0"
};
        // FirebaseåˆæœŸåŒ–
        if (!firebase.apps.length) {
          firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.firestore();

        const StudyTimerApp = () => {
          const [user, setUser] = useState(null);
          const [isStudying, setIsStudying] = useState(false);
          const [isPaused, setIsPaused] = useState(false);
          const [currentSessionTime, setCurrentSessionTime] = useState(0);
          const [sessionStartTime, setSessionStartTime] = useState(null);
          const [pausedTime, setPausedTime] = useState(0);
          const [totalStudyTime, setTotalStudyTime] = useState(0);
          const [studyHistory, setStudyHistory] = useState([]);
          const [loading, setLoading] = useState(true);
          const [syncing, setSyncing] = useState(false);
          
          const intervalRef = useRef(null);

          // ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ¬ãƒ™ãƒ«ã®å®šç¾©ï¼ˆæ™‚é–“ï¼‰
          const engineerLevels = [
            { name: 'æœªçµŒé¨“è€…', hours: 0, color: '#e2e8f0', description: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ã‚¹ã‚¿ãƒ¼ãƒˆï¼' },
            { name: 'å­¦ç¿’è€…', hours: 5, color: '#cbd5e1', description: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨ã¯ä½•ã‹ã‚’ç†è§£' },
            { name: 'åˆå­¦è€…', hours: 15, color: '#94a3b8', description: 'åŸºæœ¬çš„ãªæ–‡æ³•ãƒ»æ§‹æ–‡ã‚’å­¦ç¿’' },
            { name: 'ç·´ç¿’ç”Ÿ', hours: 30, color: '#64748b', description: 'ç°¡å˜ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒæ›¸ã‘ã‚‹' },
            { name: 'åŸºç¤ç¿’å¾—è€…', hours: 50, color: '#475569', description: 'åŸºæœ¬æ¦‚å¿µã‚’ã—ã£ã‹ã‚Šç†è§£' },
            { name: 'å¿œç”¨å­¦ç¿’è€…', hours: 75, color: '#334155', description: 'å°‘ã—è¤‡é›‘ãªå‡¦ç†ã«æŒ‘æˆ¦' },
            { name: 'é§†ã‘å‡ºã—ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', hours: 100, color: '#10b981', description: 'åŸºç¤ã¯ä¸€é€šã‚Šèº«ã«ã¤ã„ãŸ' },
            { name: 'ã‚¸ãƒ¥ãƒ‹ã‚¢è¦‹ç¿’ã„', hours: 130, color: '#059669', description: 'å®Ÿéš›ã®ã‚¢ãƒ—ãƒªä½œã‚Šã«æŒ‘æˆ¦' },
            { name: 'ã‚³ãƒ¼ãƒ‰ãƒ©ã‚¤ã‚¿ãƒ¼', hours: 170, color: '#047857', description: 'è¦‹ã‚ˆã†è¦‹ã¾ã­ã§ç°¡å˜ãªã‚‚ã®ãŒä½œã‚Œã‚‹' },
            { name: 'ãƒ‡ãƒãƒƒã‚¬ãƒ¼', hours: 220, color: '#065f46', description: 'ãªãœå‹•ãã‹ãŒåˆ†ã‹ã£ã¦ããŸ' },
            { name: 'ã‚¢ãƒ—ãƒªã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼', hours: 280, color: '#064e3b', description: 'å¿œç”¨çš„ãªæ©Ÿèƒ½ã‚‚å®Ÿè£…ã§ãã‚‹' },
            { name: 'ã‚¸ãƒ¥ãƒ‹ã‚¢ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼', hours: 300, color: '#3b82f6', description: 'ä¸€äººã§ç°¡å˜ãªã‚¢ãƒ—ãƒªã‚’ä½œã‚Œã‚‹' },
            { name: 'ãƒ†ãƒƒã‚¯ãƒ©ãƒ¼ãƒŠãƒ¼', hours: 350, color: '#2563eb', description: 'æ–°ã—ã„æŠ€è¡“ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å­¦ç¿’' },
            { name: 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ã‚®ãƒŠãƒ¼', hours: 400, color: '#1d4ed8', description: 'è¤‡æ•°ã®æŠ€è¡“ã‚’çµ„ã¿åˆã‚ã›å§‹ã‚ã‚‹' },
            { name: 'ã‚³ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆè¦‹ç¿’ã„', hours: 450, color: '#1e40af', description: 'ã‚³ãƒ¼ãƒ‰ã®è¨­è¨ˆã‚’æ„è­˜ã™ã‚‹ã‚ˆã†ã«' },
            { name: 'ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯è¦‹ç¿’ã„', hours: 500, color: '#8b5cf6', description: 'ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»APIé€£æºãŒã§ãã‚‹' },
            { name: 'ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ€ãƒ¼', hours: 600, color: '#7c3aed', description: 'è¤‡é›‘ãªæ©Ÿèƒ½ã‚‚å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«' },
            { name: 'ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ã‚¿ãƒ¼', hours: 700, color: '#6d28d9', description: 'ã‚¨ãƒ©ãƒ¼ã‚„å•é¡Œã‚’è‡ªåŠ›ã§è§£æ±º' },
            { name: 'ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼', hours: 800, color: '#5b21b6', description: 'ã‚¢ãƒ—ãƒªå…¨ä½“ã®è¨­è¨ˆãŒã§ãã‚‹' },
            { name: 'ã‚¯ã‚ªãƒªãƒ†ã‚£ã‚¬ãƒ¼ãƒ‡ã‚£ã‚¢ãƒ³', hours: 900, color: '#4c1d95', description: 'ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ãƒ†ã‚¹ãƒˆã‚’æ„è­˜' },
            { name: 'ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªãƒã‚¹ã‚¿ãƒ¼', hours: 1000, color: '#f59e0b', description: 'å°±æ´»ã§è¦‹ã›ã‚‰ã‚Œã‚‹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªå®Œæˆ' },
            { name: 'ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒ¬ãƒ™ãƒ«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', hours: 1200, color: '#d97706', description: 'å®Ÿå‹™ã§ã‚‚ä½¿ãˆã‚‹ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«' },
            { name: 'ãƒãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼', hours: 1400, color: '#b45309', description: 'ãƒãƒ¼ãƒ é–‹ç™ºãƒ»å”åŠ›ãŒã§ãã‚‹' },
            { name: 'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼', hours: 1600, color: '#92400e', description: 'ä¿å®ˆãƒ»é‹ç”¨ã¾ã§è€ƒãˆãŸé–‹ç™º' },
            { name: 'ãƒ†ãƒƒã‚¯ãƒªãƒ¼ãƒ€ãƒ¼å€™è£œ', hours: 1800, color: '#78350f', description: 'é©åˆ‡ãªæŠ€è¡“é¸å®šãŒã§ãã‚‹' },
            { name: 'ãƒŸãƒ‰ãƒ«ãƒ¬ãƒ™ãƒ«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', hours: 2000, color: '#ef4444', description: 'è¨­è¨ˆã€œãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ä¸€äººã§å¯èƒ½' },
            { name: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ¼ãƒ€ãƒ¼', hours: 2500, color: '#dc2626', description: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒªãƒ¼ãƒ‰ã§ãã‚‹' },
            { name: 'ã‚·ãƒ‹ã‚¢ãƒ¡ãƒ³ã‚¿ãƒ¼', hours: 3000, color: '#b91c1c', description: 'å¾Œè¼©ã®æŒ‡å°ãƒ»ã‚µãƒãƒ¼ãƒˆãŒã§ãã‚‹' },
            { name: 'ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ', hours: 3500, color: '#991b1b', description: 'ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è¨­è¨ˆãŒã§ãã‚‹' },
            { name: 'ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼', hours: 4000, color: '#7f1d1d', description: 'æŠ€è¡“çš„ãªæ„æ€æ±ºå®šãŒã§ãã‚‹' },
            { name: 'ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ', hours: 4500, color: '#6b1d1d', description: 'ç‰¹å®šåˆ†é‡ã®ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ' },
            { name: 'ã‚·ãƒ‹ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', hours: 5000, color: '#7c3aed', description: 'ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ãƒ»ä¸€äººå‰ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢' }
          ];

          // èªè¨¼çŠ¶æ…‹ã®ç›£è¦–
          useEffect(() => {
            const unsubscribe = auth.onAuthStateChanged((user) => {
              setUser(user);
              if (user) {
                loadUserData(user.uid);
              } else {
                setTotalStudyTime(0);
                setStudyHistory([]);
              }
              setLoading(false);
            });

            return () => unsubscribe();
          }, []);

          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
          const loadUserData = async (userId) => {
            try {
              setSyncing(true);
              const userDoc = await db.collection('users').doc(userId).get();
              if (userDoc.exists) {
                const data = userDoc.data();
                setTotalStudyTime(data.totalStudyTime || 0);
                setStudyHistory(data.studyHistory || []);
              }
            } catch (error) {
              console.error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
            } finally {
              setSyncing(false);
            }
          };

          // ãƒ‡ãƒ¼ã‚¿ã‚’Firestoreã«ä¿å­˜
          const saveToFirestore = async (newTotalTime, newHistory) => {
            if (!user) return;
            
            try {
              setSyncing(true);
              await db.collection('users').doc(user.uid).set({
                totalStudyTime: newTotalTime,
                studyHistory: newHistory,
                lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
              });
            } catch (error) {
              console.error('ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
              alert('ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
            } finally {
              setSyncing(false);
            }
          };

          // Googleãƒ­ã‚°ã‚¤ãƒ³
          const signInWithGoogle = async () => {
            try {
              const provider = new firebase.auth.GoogleAuthProvider();
              await auth.signInWithPopup(provider);
            } catch (error) {
              console.error('ãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼:', error);
              alert('ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
            }
          };

          // åŒ¿åãƒ­ã‚°ã‚¤ãƒ³
          const signInAnonymously = async () => {
            try {
              await auth.signInAnonymously();
            } catch (error) {
              console.error('åŒ¿åãƒ­ã‚°ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼:', error);
              alert('åŒ¿åãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
            }
          };

          // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
          const signOut = async () => {
            try {
              await auth.signOut();
            } catch (error) {
              console.error('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼:', error);
            }
          };

          // ç¾åœ¨ã®ãƒ¬ãƒ™ãƒ«ã‚’è¨ˆç®—
          const getCurrentLevel = () => {
            const totalHours = totalStudyTime / 3600;
            for (let i = engineerLevels.length - 1; i >= 0; i--) {
              if (totalHours >= engineerLevels[i].hours) {
                return {
                  current: engineerLevels[i],
                  next: engineerLevels[i + 1] || null,
                  progress: engineerLevels[i + 1] 
                    ? ((totalHours - engineerLevels[i].hours) / (engineerLevels[i + 1].hours - engineerLevels[i].hours)) * 100
                    : 100
                };
              }
            }
            return {
              current: engineerLevels[0],
              next: engineerLevels[1],
              progress: (totalHours / engineerLevels[1].hours) * 100
            };
          };

          // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
          const startTimer = () => {
            setIsStudying(true);
            setIsPaused(false);
            setSessionStartTime(new Date());
            setCurrentSessionTime(0);
            setPausedTime(0);
            
            intervalRef.current = setInterval(() => {
              setCurrentSessionTime(prev => prev + 1);
            }, 1000);
          };

          // ä¼‘æ†©ï¼ˆä¸€æ™‚åœæ­¢ï¼‰
          const pauseTimer = () => {
            if (isPaused) {
              setIsPaused(false);
              intervalRef.current = setInterval(() => {
                setCurrentSessionTime(prev => prev + 1);
              }, 1000);
            } else {
              setIsPaused(true);
              clearInterval(intervalRef.current);
              setPausedTime(prev => prev + 1);
            }
          };

          // å­¦ç¿’çµ‚äº†
          const stopTimer = async () => {
            clearInterval(intervalRef.current);
            
            if (currentSessionTime > 0) {
              const endTime = new Date();
              const actualStartTime = new Date(endTime.getTime() - (currentSessionTime * 1000));
              
              const newSession = {
                id: Date.now(),
                date: endTime.toLocaleDateString('ja-JP'),
                startTime: actualStartTime.toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' }),
                endTime: endTime.toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' }),
                duration: currentSessionTime
              };

              const newTotalTime = totalStudyTime + currentSessionTime;
              const newHistory = [newSession, ...studyHistory].slice(0, 10);

              setTotalStudyTime(newTotalTime);
              setStudyHistory(newHistory);
              
              // Firestoreã«ä¿å­˜
              await saveToFirestore(newTotalTime, newHistory);
            }
            
            setIsStudying(false);
            setIsPaused(false);
            setCurrentSessionTime(0);
            setSessionStartTime(null);
            setPausedTime(0);
          };

          // æ™‚é–“ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
          const formatTime = (seconds) => {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            if (hours > 0) {
              return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            return `${minutes}:${secs.toString().padStart(2, '0')}`;
          };

          // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢
          if (loading) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center">
                <div className="text-center">
                  <div className="animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600 mx-auto mb-4"></div>
                  <p className="text-xl text-gray-600">ã‚¢ãƒ—ãƒªã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
              </div>
            );
          }

          // ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
          if (!user) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center">
                  <h1 className="text-3xl font-bold text-gray-800 mb-2">ğŸš€ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å­¦ç¿’ã‚¿ã‚¤ãƒãƒ¼</h1>
                  <p className="text-gray-600 mb-8">ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸã§å®‰å…¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜</p>
                  
                  <div className="space-y-4">
                    <button
                      onClick={signInWithGoogle}
                      className="w-full bg-red-500 hover:bg-red-600 text-white py-3 px-6 rounded-xl font-medium transition-colors flex items-center justify-center space-x-2"
                    >
                      <span>ğŸ“§ Googleã§ãƒ­ã‚°ã‚¤ãƒ³</span>
                    </button>
                    
                    <button
                      onClick={signInAnonymously}
                      className="w-full bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-xl font-medium transition-colors flex items-center justify-center space-x-2"
                    >
                      <span>ğŸ”’ åŒ¿åã§ãƒ­ã‚°ã‚¤ãƒ³</span>
                    </button>
                  </div>
                  
                  <p className="text-sm text-gray-500 mt-6">
                    â€»åŒ¿åãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’å‰Šé™¤ã™ã‚‹ã¨ãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
                  </p>
                </div>
              </div>
            );
          }

          const levelInfo = getCurrentLevel();

          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
              <div className="max-w-4xl mx-auto space-y-6">
                {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                <div className="text-center py-6">
                  <div className="flex justify-between items-center mb-4">
                    <div></div>
                    <h1 className="text-3xl font-bold text-gray-800">ğŸš€ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å­¦ç¿’ã‚¿ã‚¤ãƒãƒ¼</h1>
                    <div className="flex items-center space-x-2">
                      {syncing && (
                        <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-indigo-600"></div>
                      )}
                      <div className="flex items-center space-x-2 text-sm text-gray-600">
                        <User className="w-4 h-4" />
                        <span>{user.email || 'åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼'}</span>
                      </div>
                      <button
                        onClick={signOut}
                        className="text-gray-400 hover:text-gray-600 transition-colors"
                      >
                        <LogOut className="w-4 h-4" />
                      </button>
                    </div>
                  </div>
                  <p className="text-gray-600">ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸã§å®‰å…¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ãƒ»ç®¡ç†</p>
                </div>

                {/* ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒãƒ¼ */}
                <div className="bg-white rounded-2xl shadow-lg p-8 text-center">
                  <div className="mb-6">
                    <div className="text-6xl font-mono font-bold text-gray-800 mb-4">
                      {formatTime(currentSessionTime)}
                    </div>
                    {isStudying && (
                      <div className={`text-lg font-medium ${isPaused ? 'text-orange-600' : 'text-green-600'}`}>
                        {isPaused ? 'â¸ï¸ ä¼‘æ†©ä¸­' : 'â–¶ï¸ å­¦ç¿’ä¸­'}
                      </div>
                    )}
                  </div>

                  <div className="flex justify-center space-x-4">
                    {!isStudying ? (
                      <button
                        onClick={startTimer}
                        className="flex items-center space-x-2 bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-xl font-medium transition-colors"
                      >
                        <Play className="w-6 h-6" />
                        <span>å­¦ç¿’é–‹å§‹</span>
                      </button>
                    ) : (
                      <>
                        <button
                          onClick={pauseTimer}
                          className={`flex items-center space-x-2 px-6 py-4 rounded-xl font-medium transition-colors ${
                            isPaused 
                              ? 'bg-green-500 hover:bg-green-600 text-white' 
                              : 'bg-orange-500 hover:bg-orange-600 text-white'
                          }`}
                        >
                          {isPaused ? <Play className="w-5 h-5" /> : <Pause className="w-5 h-5" />}
                          <span>{isPaused ? 'å†é–‹' : 'ä¼‘æ†©'}</span>
                        </button>
                        <button
                          onClick={stopTimer}
                          className="flex items-center space-x-2 bg-red-500 hover:bg-red-600 text-white px-6 py-4 rounded-xl font-medium transition-colors"
                        >
                          <Square className="w-5 h-5" />
                          <span>çµ‚äº†</span>
                        </button>
                      </>
                    )}
                  </div>
                </div>

                {/* ãƒ¬ãƒ™ãƒ«è¡¨ç¤ºã¨ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */}
                <div className="bg-white rounded-2xl shadow-lg p-6">
                  <div className="flex items-center space-x-3 mb-4">
                    <Target className="w-6 h-6 text-indigo-600" />
                    <h2 className="text-xl font-bold text-gray-800">ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç§°å·</h2>
                  </div>
                  
                  <div className="mb-4">
                    <div className="flex justify-between items-center mb-2">
                      <div>
                        <span className="text-2xl font-bold" style={{ color: levelInfo.current.color }}>
                          {levelInfo.current.name}
                        </span>
                        <p className="text-gray-600 text-sm">{levelInfo.current.description}</p>
                      </div>
                      <div className="text-right">
                        <div className="text-2xl font-bold text-gray-800">
                          {Math.floor(totalStudyTime / 3600)}h
                        </div>
                        <div className="text-sm text-gray-600">ç´¯ç©æ™‚é–“</div>
                      </div>
                    </div>
                    
                    {levelInfo.next && (
                      <>
                        <div className="w-full bg-gray-200 rounded-full h-3 mb-2">
                          <div
                            className="h-3 rounded-full transition-all duration-300"
                            style={{ 
                              width: `${Math.min(levelInfo.progress, 100)}%`,
                              backgroundColor: levelInfo.current.color 
                            }}
                          ></div>
                        </div>
                        <div className="flex justify-between text-sm text-gray-600">
                          <span>ç¾åœ¨: {levelInfo.current.hours}h</span>
                          <span>æ¬¡ã®ç§°å·ã¾ã§: {levelInfo.next.hours - Math.floor(totalStudyTime / 3600)}h</span>
                          <span>ç›®æ¨™: {levelInfo.next.hours}h ({levelInfo.next.name})</span>
                        </div>
                      </>
                    )}
                  </div>
                </div>

                {/* å­¦ç¿’å±¥æ­´ */}
                <div className="bg-white rounded-2xl shadow-lg p-6">
                  <div className="flex items-center space-x-3 mb-4">
                    <Clock className="w-6 h-6 text-indigo-600" />
                    <h2 className="text-xl font-bold text-gray-800">å­¦ç¿’å±¥æ­´</h2>
                    {syncing && <span className="text-sm text-blue-600">â˜ï¸ åŒæœŸä¸­...</span>}
                  </div>
                  
                  {studyHistory.length > 0 ? (
                    <div className="space-y-3">
                      {studyHistory.map((session) => (
                        <div key={session.id} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                          <div>
                            <div className="font-medium text-gray-800">{session.date}</div>
                            <div className="text-sm text-gray-600">
                              {session.startTime} - {session.endTime}
                            </div>
                          </div>
                          <div className="text-right">
                            <div className="font-bold text-indigo-600">
                              {formatTime(session.duration)}
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  ) : (
                    <p className="text-gray-500 text-center py-8">
                      ã¾ã å­¦ç¿’è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br />
                      å­¦ç¿’ã‚’é–‹å§‹ã—ã¦è¨˜éŒ²ã‚’æ®‹ã—ã¾ã—ã‚‡ã†ï¼
                    </p>
                  )}
                </div>

                {/* çµ±è¨ˆæƒ…å ± */}
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="bg-white rounded-xl shadow p-6 text-center">
                    <TrendingUp className="w-8 h-8 text-green-500 mx-auto mb-2" />
                    <div className="text-2xl font-bold text-gray-800">
                      {studyHistory.length}
                    </div>
                    <div className="text-sm text-gray-600">å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°</div>
                  </div>
                  
                  <div className="bg-white rounded-xl shadow p-6 text-center">
                    <Clock className="w-8 h-8 text-blue-500 mx-auto mb-2" />
                    <div className="text-2xl font-bold text-gray-800">
                      {studyHistory.length > 0 ? Math.floor((totalStudyTime / studyHistory.length) / 60) : 0}åˆ†
                    </div>
                    <div className="text-sm text-gray-600">å¹³å‡å­¦ç¿’æ™‚é–“</div>
                  </div>
                  
                  <div className="bg-white rounded-xl shadow p-6 text-center">
                    <Target className="w-8 h-8 text-purple-500 mx-auto mb-2" />
                    <div className="text-2xl font-bold text-gray-800">
                      {levelInfo.next ? levelInfo.next.hours - Math.floor(totalStudyTime / 3600) : 0}h
                    </div>
                    <div className="text-sm text-gray-600">æ¬¡ã®ç§°å·ã¾ã§</div>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<StudyTimerApp />, document.getElementById('root'));
    </script>
</body>
</html>
